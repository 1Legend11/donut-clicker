extends layout

block content
  .main.index
    .header-text
      img(src="/images/donut1.png", alt="",width="100px")
      h1(class="header-title") Donut Clicker
      small Built with NodeJS
    .game
      .valign-wrapper.row
        .col.s10.pull-s1.m8.pull-m2.l8.pull-l2.main-tabs
          ul.tabs
            li.tab.col.s3
              a(href='#game') Jeu
            li.tab.col.s3
              a(href='#options') Options
            li.tab.col.s3
              a(href='#stats') Stats
              li.tab.col.s3
                a(href='#gains') Success
      .valign-wrapper.row
        #game.tab-item.col.s10.pull-s1.m8.pull-m2.l8.pull-l2
          .row
            .col.s6.donuts-part
              .title Donut Clicker
              .donuts
                span.nbDonuts 
                span  Donuts
              .freq
                span.donutsPerSec 
                span  par seconde
              .main-donut
                a(id="donutLink")
                  img(src="/images/main-donut.png", alt="")
                  span.donutParticle.hidden
                    span.donutParticleNb +10

              .bonus
                .bonus-title Bonus
                #bonus-1.col.s2.bonus-item
                  .bonus-content.disabled
                    img(src="/images/bonus/tetine.jpg", alt="tetine")
                  .bonus-infos                   
                    .name                 
                    .desc
                    .cost
                #bonus-2.col.s2.bonus-item
                  .bonus-content.disabled 
                    img(src="/images/bonus/skate.jpg", alt="skate")
                  .bonus-infos                   
                    .name                 
                    .desc
                    .cost
                #bonus-3.col.s2.bonus-item
                  .bonus-content.disabled  
                    img(src="/images/bonus/saxo.png", alt="saxo")
                  .bonus-infos                   
                    .name                 
                    .desc
                    .cost
                #bonus-4.col.s2.bonus-item
                  .bonus-content.disabled 
                    img(src="/images/bonus/papy.jpg", alt="papy")
                  .bonus-infos                   
                    .name                 
                    .desc
                    .cost
                #bonus-5.col.s2.bonus-item
                  .bonus-content.disabled  
                    img(src="/images/bonus/duff.png", alt="duff")
                  .bonus-infos                   
                    .name                 
                    .desc
                    .cost
                #bonus-6.col.s2.bonus-item
                  .bonus-content.disabled
                    img(src="/images/bonus/krusty.jpg", alt="krusty")
                  .bonus-infos                   
                    .name                 
                    .desc
                    .cost
            .col.s6.extras-part
              .title 
                span.main-title Extras
                .buy
                  span
                    input#value1(name='group1', type='radio',value='1')
                    label(for='value1') x 1
                  span
                    input#value10(name='group1', type='radio',value='10')
                    label(for='value10') x 10
                  span
                    input#value100(name='group1', type='radio',value='100')
                    label(for='value100') x 100

              .extra1.disabled
                .row
                  .col.s12
                    .card.hoverable.blue
                      .card-content.white-text
                        .extra-head
                          img(class="extra-head-img" src="/images/simpson/maggie.png", alt="",width="72px")
                          img(class="extra-head-shadow  hidden" src="/images/simpson/simpson-shadow/maggie_shadow.png", alt="",width="72px")
                        .extra-infos
                          span.extra-title
                          span.extra-cost
                          span.extra-donut
                            img(src="/images/donut1.png", alt="",width="15px")
                        .extra-counter
                          span

              .extra2.disabled
                .row
                  .col.s12
                    .card.hoverable.blue
                      .card-content.white-text
                        .extra-head
                          img(class="extra-head-img" src="/images/simpson/bart.png", alt="",width="70px")
                          img(class="extra-head-shadow  hidden" src="/images/simpson/simpson-shadow/bart_shadow.png", alt="",width="70px")
                        .extra-infos
                          span.extra-title
                          span.extra-cost
                          span.extra-donut
                            img(src="/images/donut1.png", alt="",width="15px")
                        .extra-counter
                          span
              .extra3.disabled
                .row
                  .col.s12
                    .card.hoverable.blue
                      .card-content.white-text
                        .extra-head
                          img(class="extra-head-img" src="/images/simpson/lisa.png", alt="",width="72px")
                          img(class="extra-head-shadow  hidden" src="/images/simpson/simpson-shadow/lisa_shadow.png", alt="",width="72px")
                        .extra-infos
                          span.extra-title
                          span.extra-cost
                          span.extra-donut
                            img(src="/images/donut1.png", alt="",width="15px")
                        .extra-counter
                          span
              .extra4.disabled
                .row
                  .col.s12
                    .card.hoverable.blue
                      .card-content.white-text
                        .extra-head
                          img(class="extra-head-img" src="/images/simpson/marge.png", alt="",width="70px")
                          img(class="extra-head-shadow  hidden" src="/images/simpson/simpson-shadow/marge_shadow.png", alt="",width="70px")
                        .extra-infos
                          span.extra-title
                          span.extra-cost
                          span.extra-donut
                            img(src="/images/donut1.png", alt="",width="15px")
                        .extra-counter
                          span
              .extra5.disabled
                .row
                  .col.s12
                    .card.hoverable.blue
                      .card-content.white-text
                        .extra-head
                          img(class="extra-head-img" src="/images/simpson/homer.png", alt="",width="70px")
                          img(class="extra-head-shadow hidden" src="/images/simpson/simpson-shadow/homer_shadow.png", alt="",width="70px")
                        .extra-infos
                          span.extra-title
                          span.extra-cost
                          span.extra-donut
                            img(src="/images/donut1.png", alt="",width="15px")
                        .extra-counter
                          span

        #options.tab-item.col.s10.pull-s1.m8.pull-m2.l8.pull-l2.options
          .opt-main
            .theme
              span 
                i.ion-android-color-palette
                | Theme
              a(class="gradient1")   
              a(class="gradient2") 
              a(class="gradient3")   
              a(class="gradient4")   
            .volume
              span
                i.material-icons volume_up 
                | Volume
                .switch
                  label
                    | Off
                    input(type='checkbox' class="switchVolume")
                    span.lever
                    | On
            .music
              span
                i.ion-music-note
                | Music
                .switch
                  label
                    | Off
                    input(type='checkbox' class="switchMusic")
                    span.lever
                    | On
            .notifications
              span
                i.ion-ios-bell
                | Notifications
                .switch
                  label
                    | Off
                    input(type='checkbox' class="switchNotifs")
                    span.lever
                    | On


        #stats.tab-item.col.s10.pull-s1.m8.pull-m2.l8.pull-l2
          table.striped.responsive-table.stats
            thead
              tr
                th
                th
            tbody
              tr
                th.stats-title-donuts
                td.stats-donuts
              tr
                th.stats-title-donutsTot
                td.stats-donutsTot
              tr
                th.stats-title-donutsPerS
                td.stats-donutsPerS
              tr
                th.stats-title-donutsPerSwithBonus
                td.stats-donutsPerSwithBonus
              tr
                th.stats-title-donutsPerC
                td.stats-donutsPerC
              tr
                th.stats-title-clicks
                td.stats-clicks
              tr
                th.stats-title-donutsOnClick
                td.stats-donutsOnClick
              tr
                th.stats-title-countAll
                td.stats-countAll
              tr
                th.stats-title-start
                td.stats-start

        #gains.tab-item.col.s10.pull-s1.m8.pull-m2.l8.pull-l2.gains
          .success
            .row
              #maggie-1.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/star_maggie.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #bart-1.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/skate_bart.png", alt="")
                .success-infos                  
                  .name                   
                  .desc
              #lisa-1.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/saxophone_lisa.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #marge-1.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/pancakes_marge.png", alt="")
                .success-infos                  
                  .name                   
                  .desc
              #homer-1.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/beer_homer.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #surprise-1.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/donut1.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
            .row
              #maggie-2.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/star_maggie.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #bart-2.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/skate_bart.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #lisa-2.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/saxophone_lisa.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #marge-2.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/pancakes_marge.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #homer-2.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/beer_homer.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #surprise-2.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/donut1.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
            .row
              #maggie-3.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/star_maggie.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #bart-3.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/skate_bart.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #lisa-3.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/saxophone_lisa.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #marge-3.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/pancakes_marge.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #homer-3.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/beer_homer.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #surprise-3.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/donut1.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
            .row
              #maggie-4.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/star_maggie.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #bart-4.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/skate_bart.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #lisa-4.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/saxophone_lisa.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #marge-4.col.s2.success-item
                .success-content            
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/pancakes_marge.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #homer-4.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/beer_homer.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #surprise-4.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/donut1.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
            .row
              #maggie-5.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/star_maggie.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #bart-5.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/skate_bart.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #lisa-5.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/saxophone_lisa.png", alt="")
                .success-infos
                  .name
                  .desc
              #marge-5.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/pancakes_marge.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #homer-5.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/items/beer_homer.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
              #surprise-5.col.s2.success-item
                .success-content 
                  img.lock(src="/images/items/question_mark.png", alt="")
                  img.unlock.hidden(src="/images/donut1.png", alt="")
                .success-infos                   
                  .name                   
                  .desc
        //- Modals
        #modal_profile.modal
          .modal-content
            h4.modal-header
              i.ion-ios-person 
              | My Profile
            .row
              form#updateForm.col.s12(method="POST")
                .row
                  if status 
                    p=status
                  .input-field.col.s6
                    input#id( value=`${user.id}`, type='text', name="id", readonly="readonly")
                    label(for='id') Id user
                  .input-field.col.s6
                    input#username(value=`${user.username}`, type='text',name="username")
                    label(for='username') Username
                .row
                  .input-field.col.s6
                    input#email( value=`${user.email}`, type='email', name="email")
                    label(for='email') Email
                  .input-field.col.s6
                    input#password(placeholder="New password", type='password', name="password")
                    label(for='Password') Password
                .modal-footer
                  input#btnUpdate.btn.modal-update(type="submit" value="Update")
                  a.modal-action.modal-close.waves-effect.btn-flat(href='#!') Close

        #modal_htp.modal
          .modal-content
            h4.modal-header
              i.ion-ios-help-outline 
              | How to play ?
              | 
            .row
              .faq-item
                .head Comment gagner des donuts ?
                .content
                  ul
                    li Cliquer sur le donuts
                    li Augmenter ses donuts par seconde
              .faq-item 
                .head Comment augmenter mes donuts par seconde ?
                .content
                  ul
                    li Acheter des extra
                    li Débloquer les bonus
              .faq-item
                .head Comment débloquer les succès ?
                .content Gagner, gagner, gagner et encore gagner plus de donuts
              .faq-item
                .head La musique me gave, comment faire ?
                .content Faites un tour dans l'onglet 'options'
              .faq-item
                .head Comment modifier mes informations de profil ?
                .content Cliquer sur le bouton 'Profile' en haut à droite
          .modal-footer
            a.modal-action.modal-close.waves-effect.btn-flat(href='#!') Close
block script
  script(src='/socket.io/socket.io.js')
  script(src="/javascripts/app.js")
  //-script test
  script.
    const smallDonut = $(".donutParticle");
    const container = $("#donutLink");

    container.click(function(e){
      const posX= e.pageX||e.clientX+document.body.scrollLeft;
      const posY= e.pageY||e.clientY+document.body.scrollTop;
      const xPosition = (posX - this.getBoundingClientRect().left - (smallDonut.innerWidth() / 2));
      const yPosition = (posY - this.getBoundingClientRect().top - (smallDonut.innerHeight() / 2));
      smallDonut.css({left:xPosition,top:yPosition});
      smallDonut.removeClass("hidden").fadeOut("slow");
      smallDonut.addClass("visible").fadeIn("slow");
      setTimeout(function () {      
        smallDonut.removeClass("visible").fadeOut("slow");
        smallDonut.addClass("hidden").fadeIn("slow");
      }, 300);

    });
    //-materialize modal
      $(function () {
        $('.modal').modal();
      }); 
    //-modal update events
    $(function(){
      $('#btnUpdate').attr('disabled', true).addClass('disabled');
      $('#updateForm :input#username,#updateForm :input#email,#updateForm :input#password').on('keyup', function(){
        $('#btnUpdate').removeAttr('disabled').removeClass('disabled');
      });
    });
